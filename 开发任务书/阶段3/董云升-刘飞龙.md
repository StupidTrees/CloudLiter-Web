# 任务名称：完成词云统计
##### 负责人：董云升，刘飞龙
##### 任务截止：2020/11/1 24:00
#### 注意事项 每完成一项功能就push一次

### 用户故事
- 用户希望系统可以统计自己所有发言的词频
- 用户希望系统可以统计自己所有对话的词频
- 用户希望词频可视化为词云

### 功能需求

#### 1. 词频统计
- [ ] 完成
- 功能描述：每有一条新消息，就需要对其进行分词，将词汇加入到
    1. 该对话的词频统计表中
    2. 该用户的词频统计表中
- 数据结构需求：需要设计以上两种词频统计表的存储格式（最好有现成解决方案），使其满足以下业务需求：
    1. 可以根据对话id/用户id，快速将某个词加入到对应的统计表中
    2. 可以根据对话id/用户id，迅速找到对应的统计表
- 功能实现入口：在长连接处理模块，当消息到达时，进行异步切词+存入统计数据库
- 功能实现工具：切词使用nodejieba，使用示例可见百度。若nodejieba安装失败，可以尝试先安装node-gyp, 再使用cnpm install nodejieba
- 任务分配：
    1. 刘飞龙、董云升：确定词频统计表的存储格式
    2. 刘飞龙：实现词频统计功能

#### 2. 词云生成
- [ ] 完成
- 功能描述：根据用户id，查询某用户词频生成的词云；根据对话id，查询某对话词频生成的词云
- 词云形式要求：图片格式/html格式
- 接口地址：/word_cloud/user（用户词云）
- 接口地址：/word_cloud/conversation（对话词云）
- 请求方式：GET
- 请求参数(用户词云)

    | 参数 | 含义 | 示例 |
    | ---- | ---- | ---- |
    | userId | 用户id | 2 |
    
- 请求参数(对话词云)

    | 参数 | 含义 | 示例 |
    | ---- | ---- | ---- |
    | friendId | 好友id | 2 |
    
- 返回格式  
    以图片或html代码返回
    